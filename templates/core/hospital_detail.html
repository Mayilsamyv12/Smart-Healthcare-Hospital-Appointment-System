{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container" style="max-width: 1200px; margin: 0 auto; padding-top: 2rem;">

    <!-- Hospital Header / Hero -->
    <div class="card"
        style="border: none; border-radius: 20px; overflow: hidden; margin-bottom: 3rem; padding: 0; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
        <div class="hospital-hero-container">
            {% if hospital.image %}
            <img src="{{ hospital.image.url }}" alt="{{ hospital.name }}" class="hospital-hero-img">
            {% else %}
            <div
                style="width: 100%; height: 100%; background: linear-gradient(135deg, #e0eafc, #cfdef3); display: flex; align-items: center; justify-content: center;">
                <img src="{% static 'img/hospital_icon.png' %}" style="width: 120px; opacity: 0.5;">
            </div>
            {% endif %}
        </div>

        <div class="card-content" style="padding: 2rem;">
            <!-- Title & Location Section -->
            <div style="margin-bottom: 2rem; border-bottom: 1px solid #eee; padding-bottom: 2rem;">
                <h1 style="font-size: 3rem; margin-bottom: 0.5rem; color: var(--text-main);">{{ hospital.name }}</h1>
                <p
                    style="font-size: 1.1rem; color: #444; display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem;">
                    <span style="font-size: 1.3rem;">üìç</span>
                    <span>{{ hospital.location|default:"Location info unavailable" }}</span>
                </p>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; align-items: offset;">

                <!-- Left: Specialties -->
                <div>
                    <h3
                        style="font-size: 1.5rem; color: var(--primary); margin-bottom: 1rem; border-bottom: 2px solid #eee; padding-bottom: 0.5rem;">
                        Medical Specialties
                    </h3>
                    <div style="display: flex; flex-wrap: wrap; gap: 0.8rem;">
                        {% for specialty in hospital.specialties.all %}
                        {% if "core.Specialty" not in specialty.name %}
                        <span class="badge"
                            style="font-size: 1rem; padding: 0.6rem 1rem; background: #eef2ff; color: var(--primary); border: 1px solid #dbeafe;">
                            {{ specialty.name }}
                        </span>
                        {% endif %}
                        {% empty %}
                        <p class="text-muted">General Healthcare Services</p>
                        {% endfor %}
                    </div>
                </div>

                <!-- Right: Contact & Actions -->
                <div>
                    <h3
                        style="font-size: 1.5rem; color: var(--primary); margin-bottom: 1rem; border-bottom: 2px solid #eee; padding-bottom: 0.5rem;">
                        Contact Information
                    </h3>
                    <div style="font-size: 1.2rem; color: #444; margin-bottom: 2rem;">
                        <p style="margin-bottom: 1rem;"><strong>üìû Phone:</strong> {{ hospital.contact_no }}</p>
                        {% if hospital.latitude and hospital.longitude %}
                        <p style="margin-bottom: 1rem;"><strong>üß≠ Directions:</strong></p>
                        <a href="https://www.google.com/maps/dir/?api=1&destination={{ hospital.latitude }},{{ hospital.longitude }}"
                            target="_blank" class="btn btn-primary"
                            style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.8rem 1.5rem;">
                            <span>üó∫Ô∏è</span> Open in Google Maps
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Doctors Section -->
    <div class="section-header" style="text-align: center; margin-bottom: 3rem;">
        <h2 style="font-size: 2.5rem; color: var(--text-main);">Doctors at {{ hospital.name }}</h2>
        <div style="width: 80px; height: 4px; background: var(--primary); margin: 1rem auto; border-radius: 2px;"></div>
    </div>

    <div class="grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 2rem;">
        {% for doctor in hospital.doctors.all %}
        <div class="card" style="border: 12px solid white; display: flex; flex-direction: column; text-align: left;">
            <div class="card-image-wrapper"
                style="height: 250px; overflow: hidden; border-radius: 12px; margin-bottom: 1rem;">
                {% if doctor.image %}
                <img src="{{ doctor.image.url }}" alt="{{ doctor.name }}"
                    style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s;">
                {% else %}
                <div
                    style="width: 100%; height: 100%; background: #f0f0f0; display: flex; flex-direction: column; align-items: center; justify-content: center;">
                    <img src="{% static 'img/doctor_icon.png' %}" style="width: 80px; opacity: 0.5;">
                </div>
                {% endif %}
            </div>

            <h3 style="font-size: 1.4rem; margin-bottom: 0.2rem;">Dr. {{ doctor.name }}</h3>
            <p style="color: var(--primary); font-weight: 600; margin-bottom: 0.5rem;">{{ doctor.specialty }}</p>

            <!-- Line by Line Details -->
            <p style="margin-bottom: 0.3rem;"><strong>Experience:</strong> {{ doctor.experience }} years</p>
            <p style="margin-bottom: 1rem;"><strong>Fee:</strong> ‚Çπ{{ doctor.consultation_fee }}</p>

            <a href="{% url 'book_appointment' doctor.id %}" class="btn btn-primary"
                style="margin-top: auto; text-align: center;">Book Appointment</a>
        </div>
        {% empty %}
        <div
            style="grid-column: 1 / -1; text-align: center; padding: 4rem; background: white; border-radius: 20px; border: 12px solid white;">
            <p style="font-size: 1.2rem; color: #888;">No doctors listed for this hospital yet.</p>
        </div>
        {% endfor %}
    </div>

</div>
{% endblock %}